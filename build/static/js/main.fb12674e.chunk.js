(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e){e.exports=[{label:"Tapahtuma",key:"title",type:"String"},{label:"Kuvaus",key:"description",type:"String"},{label:"Alkuaika",key:"startdate",type:"Date"},{label:"Loppuaika",key:"enddate",type:"Date"},{label:"Perustaja",key:"creator.username",type:"String"},{label:"P\xe4\xe4k\xe4ytt\xe4j\xe4t",key:"admins",type:"Count"},{label:"Muut osallistujat",key:"participants",type:"Count"},{label:"Kohde, nimi",key:"target.name",type:"String"},{label:"Kohde, leveyspiiri",key:"target.latitude",type:"Latitude"},{label:"Kohde, pituuspiiri",key:"target.longitude",type:"Longitude"},{label:"Kohde, tyyppi",key:"target.type",type:"String"},{label:"Kohde, syvyys",key:"target.depth",type:"String"},{label:"Kohde, materiaali",key:"target.material",type:"String"},{label:"Kohde, hylyt-tunnus",key:"target.hylyt_id",type:"Number"},{label:"Kohde, mj-tunnus",key:"target.mj_id",type:"String"},{label:"Sukellukset",key:"dives",type:"Count"}]},101:function(e){e.exports=[{label:"Kohde, nimi",key:"name",type:"String"},{label:"Kohde, leveyspiiri",key:"latitude",type:"Latitude"},{label:"Kohde, pituuspiiri",key:"longitude",type:"Longitude"},{label:"Kohde, tyyppi",key:"type",type:"String"},{label:"Kohde, syvyys",key:"depth",type:"String"},{label:"Kohde, materiaali",key:"material",type:"String"},{label:"Kohde, hylyt-tunnus",key:"hylyt_id",type:"Number"},{label:"Kohde, mj-tunnus",key:"mj_id",type:"String"},{label:"Sukellus, sukeltaja",key:"dives.dive.username",type:"String"},{label:"Sukellus, alkuaika",key:"dives.dive.startdate",type:"Date"},{label:"Sukellus, loppuaika",key:"dives.dive.enddate",type:"Date"},{label:"Sukellus, leveyspiiri",key:"dives.dive.latitude",type:"Latitude"},{label:"Sukellus, pituuspiiri",key:"dives.dive.longitude",type:"Longitude"}]},102:function(e){e.exports=[{label:"Kohde, nimi",key:"name",type:"String"},{label:"Kohde, leveyspiiri",key:"latitude",type:"Latitude"},{label:"Kohde, pituuspiiri",key:"longitude",type:"Longitude"},{label:"Kohde, tyyppi",key:"type",type:"String"},{label:"Kohde, syvyys",key:"depth",type:"String"},{label:"Kohde, materiaali",key:"material",type:"String"},{label:"Kohde, hylyt-tunnus",key:"hylyt_id",type:"Number"},{label:"Kohde, mj-tunnus",key:"mj_id",type:"String"}]},103:function(e){e.exports=[{label:"K\xe4ytt\xe4j\xe4, k\xe4ytt\xe4j\xe4nimi",key:"username",type:"String"},{label:"K\xe4ytt\xe4j\xe4, s\xe4hk\xf6posti",key:"email",type:"String"},{label:"Tapahtumat",key:"events",type:"Count"},{label:"Sukellukset",key:"dives",type:"Count"},{label:"Viestit",key:"messages",type:"Count"}]},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),i=a.n(l),c=a(9),u=a(26),s=a(52),o=a(2),d=a.n(o),m=a(6),p="https://www.kyppi.fi/to.aspx?id=112.",g=a(15),E=a.n(g),h="".concat("").concat("api/login/BO"),v={login:function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(h,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedUser:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":case"RELOGIN_USER":case"LOGOUT_USER":return t.data;default:return e}},y=function(e,t,a){return function(){var n=Object(m.a)(d.a.mark(function n(r){return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"SET_NOTIFICATION",data:{notMessage:t,notClass:e}}),n.next=3,setTimeout(function(){r({type:"CLEAR_NOTIFICATION"})},1e3*a);case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notMessage:"",notClass:"info"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return"";default:return e}},k="".concat("").concat("api/targets"),S={getAll:function(){var e=Object(m.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(k);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_TARGETS":return t.data;case"CLEAR_TARGETS":return null;default:return e}},w="".concat("").concat("api/events/bo"),O={getAll:function(){var e=Object(m.a)(d.a.mark(function e(){var t,a,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!((a=window.localStorage.getItem("sukeltajaBOUser"))&&a.length>0&&"null"!==a)){e.next=7;break}n="bearer ".concat(JSON.parse(a).token),t={headers:{Authorization:n}},e.next=9;break;case 7:return console.log("Unauthorized call in eventService"),e.abrupt("return",null);case 9:return e.next=11,E.a.get(w,t);case 11:return r=e.sent,e.abrupt("return",r.data);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_EVENTS":return t.data;case"CLEAR_EVENTS":return null;default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAP_DIVES_TO_TARGETS":return t.data;case"CLEAR_DIVES":return null;default:return e}},T="".concat("").concat("api/users"),U={getAll:function(){var e=Object(m.a)(d.a.mark(function e(){var t,a,n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!((a=window.localStorage.getItem("sukeltajaBOUser"))&&a.length>0&&"null"!==a)){e.next=7;break}n="bearer ".concat(JSON.parse(a).token),t={headers:{Authorization:n}},e.next=9;break;case 7:return console.log("Unauthorized call in userService"),e.abrupt("return",null);case 9:return e.next=11,E.a.get(T,t);case 11:return r=e.sent,e.abrupt("return",r.data);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;case"CLEAR_USERS":return null;default:return e}},_=a(58),I="".concat("").concat("api/bousers"),N=function(){var e=window.localStorage.getItem("sukeltajaBOUser");return e&&e.length>0&&"null"!==e?{headers:{Authorization:"bearer ".concat(JSON.parse(e).token)}}:(console.log("Unauthorized call in bouserService"),null)},D={getAll:function(){var e=Object(m.a)(d.a.mark(function e(){var t,a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=N())){e.next=6;break}return e.next=4,E.a.get(I,t);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(d.a.mark(function e(t,a,n){var r,l;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=N())){e.next=13;break}return e.prev=2,e.next=5,E.a.post(I,{username:t,password:a,admin:n},r);case 5:return l=e.sent,e.abrupt("return",l);case 9:return e.prev=9,e.t0=e.catch(2),console.log("Error creating new bo user",e.t0),e.abrupt("return",e.t0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a,n){return e.apply(this,arguments)}}(),update:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(a=N())){e.next=6;break}return e.next=4,E.a.put(I,t,a);case 4:return n=e.sent,e.abrupt("return",n);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(a=N())){e.next=13;break}return e.prev=2,e.next=5,E.a.delete("".concat(I,"/").concat(t._id),a);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",null);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll();case 2:a=(a=e.sent).sort(function(e,t){return e.username.toUpperCase().localeCompare(t.username.toUpperCase())}),t({type:"INIT_BOUSERS",data:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BOUSERS":return t.data;case"CREATE_BOUSER":return(e=[].concat(Object(_.a)(e),[t.data])).sort(function(e,t){return e.username.toUpperCase().localeCompare(t.username.toUpperCase())}),e;case"UPDATE_BOUSER":return(e=e.map(function(e){return e._id===t.data._id?t.data:e})).sort(function(e,t){return e.username.toUpperCase().localeCompare(t.username.toUpperCase())}),e;case"DELETE_BOUSER":return e.filter(function(e){return e._id!==t.data._id});case"CLEAR_BOUSERS":return null;default:return e}},A=Object(u.c)({authentication:f,notification:b,targets:j,events:F,diveStats:x,users:C,bousers:B}),R=Object(u.d)(A,Object(u.a)(s.a)),K=a(120),M=a(113),P=a(119),z=a(110),V=a(116),G=a(115),H=a(117),J=Object(c.b)(function(e){return{notMessage:e.notification.notMessage,notClass:e.notification.notClass}},null)(function(e){return void 0===e.notMessage||null===e.notMessage||""===e.notMessage?null:r.a.createElement("div",null,r.a.createElement("div",null,"\xa0"),r.a.createElement("div",null,r.a.createElement(H.a,{variant:e.notClass},e.notMessage)),r.a.createElement("div",null,"\xa0"))}),W=a(7),Y=a(118),q=a(114),Q=a(109),X={loginUser:function(e,t){return function(){var a=Object(m.a)(d.a.mark(function a(n){var r;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.login({username:e,password:t});case 2:return r=a.sent,a.next=5,window.localStorage.setItem("sukeltajaBOUser",JSON.stringify(r));case 5:return a.next=7,n({type:"LOGIN_USER",data:{loggedUser:r}});case 7:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},reLoginUser:function(e){return function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"RELOGIN_USER",data:{loggedUser:e}});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},setNotification:y},Z=Object(c.b)(function(e){return{loggedUser:e.authentication.loggedUser}},X)(function(e){var t=Object(n.useState)(""),a=Object(W.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(""),u=Object(W.a)(c,2),s=u[0],o=u[1],p=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){var t=function(){var e=window.localStorage.getItem("sukeltajaBOUser");return e&&e.length>0&&"null"!==e?JSON.parse(e):null}();void 0!==t&&null!==t&&(e.reLoginUser(t),p())},[]);var g=function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Logging in",l),a.preventDefault(),t.prev=2,t.next=5,e.loginUser(l,s);case 5:p(),window.location.href="/",t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(2),console.log("Exception trying to login",l),t.next=14,e.setNotification("danger","K\xe4ytt\xe4j\xe4tunnus tai salasana on virheellinen",5);case 14:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}();return void 0===e.loggedUser||null===e.loggedUser?r.a.createElement("div",null,r.a.createElement("h2",null,"Sukeltaja Back Office"),r.a.createElement(q.a,{onSubmit:g},r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Label,null,"K\xe4ytt\xe4j\xe4tunnus"),r.a.createElement(q.a.Control,{type:"text",name:"username",placeholder:"Sy\xf6t\xe4 k\xe4ytt\xe4j\xe4tunnus",onChange:function(e){i(e.target.value)}})),r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Label,null,"Salasana"),r.a.createElement(q.a.Control,{type:"password",name:"password",placeholder:"Sy\xf6t\xe4 salasana",onChange:function(e){o(e.target.value)}})),r.a.createElement(q.a.Group,null,r.a.createElement(Q.a,{variant:"primary",type:"submit"},"Kirjaudu")),r.a.createElement("p",null))):"/"!==window.location.pathname?(console.log("Redirecting to /"),r.a.createElement(Y.a,{to:"/"})):null}),$={logoutUser:function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT_USER",data:{loggedUser:null}});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},clearEvents:function(){return{type:"CLEAR_EVENTS"}},clearDives:function(){return{type:"CLEAR_DIVES"}},clearTargets:function(){return{type:"CLEAR_TARGETS"}},clearUsers:function(){return{type:"CLEAR_USERS"}},clearBOUsers:function(){return{type:"CLEAR_BOUSERS"}},setNotification:y},ee=Object(c.b)(function(e){return{loggedUser:e.authentication.loggedUser}},$)(function(e){var t=function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,console.log("Logging out user",e.loggedUser.username),t.next=5,e.logoutUser();case 5:return window.localStorage.removeItem("sukeltajaBOUser"),t.next=8,e.clearEvents();case 8:return t.next=10,e.clearDives();case 10:return t.next=12,e.clearTargets();case 12:return t.next=14,e.clearUsers();case 14:return t.next=16,e.clearBOUsers();case 16:return t.next=18,e.setNotification("success","Olet kirjautunut ulos",5);case 18:return t.abrupt("return");case 21:t.prev=21,t.t0=t.catch(1),e.setNotification("danger","Kautta Neptunuksen! Uloskirjautuminen meni pieleen!",10);case 24:case"end":return t.stop()}},t,null,[[1,21]])}));return function(e){return t.apply(this,arguments)}}();return void 0===e.loggedUser||null===e.loggedUser?r.a.createElement(r.a.Fragment,null,"\xa0"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{color:"black"}},"Sukeltamassa ",e.loggedUser.username,"\xa0",r.a.createElement(Q.a,{variant:"primary",size:"sm",type:"button",onClick:t},"Kirjaudu ulos")))}),te=a(111),ae=a(53),ne=a(112),re=a(54),le=function(e){var t=function(e){return Math.floor(e)},a=function(e){return Math.floor(60*(e-t(e)))};return"".concat(t(e),"\xb0 ").concat(a(e),"' ").concat(function(e){return 60*(60*(e-t(e))-a(e))}(e).toFixed(4),'"')},ie=function(e){var t=function(e){return e?"".concat(p).concat(e):void 0};if(e.target&&null!==e.target){var a=e.target;return r.a.createElement(z.a,{id:a._id,style:{margins:"0px"}},r.a.createElement(te.a,null,r.a.createElement(ae.a,{id:"caption"},"Tyyppi:"),r.a.createElement(ae.a,null,a.type),r.a.createElement(ae.a,{id:"caption"},"Materiaali:"),r.a.createElement(ae.a,null,a.material),r.a.createElement(ae.a,{id:"caption"},"Syvyys:"),r.a.createElement(ae.a,null,a.depth)),r.a.createElement(te.a,null,r.a.createElement(ae.a,{id:"caption"},"Museovirasto:"),r.a.createElement(ae.a,{lg:6},r.a.createElement("a",{href:t(a.mj_id)},t(a.mj_id))),r.a.createElement(ae.a,{lg:4},"\xa0")),r.a.createElement(te.a,null,r.a.createElement(ae.a,{id:"caption"},"Hylyt.net:"),r.a.createElement(ae.a,{lg:6},r.a.createElement("a",{href:a.hylyt_link},a.hylyt_link)),r.a.createElement(ae.a,{lg:4},"\xa0")))}return null},ce=a(59),ue=a(12);ue.Settings.defaultLocale="fi";var se=function(e){var t=function(e){return e.toLocaleString(Object(ce.a)({weekday:"short"},ue.DateTime.DATETIME_SHORT))};return t("string"===typeof e?ue.DateTime.fromISO(e):ue.DateTime.fromJSDate(e))},oe=function(e){if(e.dive){var t=e.dive;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3",id:"dive"},t.user.username),r.a.createElement("td",{colSpan:"1",id:"dive"},se(t.startdate)),r.a.createElement("td",{colSpan:"1",id:"dive"},se(t.enddate)),r.a.createElement("td",{colSpan:"2",id:"dive"},"".concat(le(t.latitude)),t.latitude>0?" N ":" S ","".concat(le(t.longitude)),t.longitude>0?" E ":" W ")))}return null},de=function(e){var t=e.dives,a=Object(n.useState)(!1),l=Object(W.a)(a,2),i=l[0],c=l[1],u={margins:"0px"};if(t&&t.length>0)return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(){return c(!i)},"aria-controls":e.elementId,"aria-expanded":i,width:"100%"},r.a.createElement("td",{width:"1%"},r.a.createElement("i",{className:i?"fas fa-caret-down":"fas fa-caret-right"})),r.a.createElement("td",{colSpan:"2",id:"caption"},"Sukeltaja"),r.a.createElement("td",{colSpan:"1",id:"caption"},"Alkuaika"),r.a.createElement("td",{colSpan:"1",id:"caption"},"Loppuaika"),r.a.createElement("td",{colSpan:"2",id:"caption"},"Sijainti")),r.a.createElement(re.a,{in:i},r.a.createElement("tr",{id:e.elementId,style:u},r.a.createElement("td",{colSpan:"7",style:u},r.a.createElement("table",{style:u,width:"100%"},r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement(oe,{key:"".concat(e._id).concat(t),dive:e,odd:t%2})})))))));return null},me=function(e){var t=Object(n.useState)(!1),a=Object(W.a)(t,2),l=a[0],i=a[1];if(void 0!==e.target&&null!==e.target){var c=e.target;return e.noDetails?r.a.createElement("tr",null,r.a.createElement("td",null,c.name),r.a.createElement("td",null,c.dives.length)):r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(){return i(!l)},"aria-controls":e.elementId,"aria-expanded":l,style:void 0!==c.dives?{backgroundColor:"#ddddff"}:{backgroundColor:"#ffffff"}},r.a.createElement("td",null,r.a.createElement("i",{className:l?"fas fa-caret-down":"fas fa-caret-right"})),r.a.createElement("td",{colSpan:"2"},c.name),r.a.createElement("td",{colSpan:"2"},"".concat(le(c.latitude)),c.latitude>0?" N ":" S "),r.a.createElement("td",{colSpan:"2"},"".concat(le(c.longitude)),c.longitude>0?" E ":" W ")),r.a.createElement(re.a,{in:l},r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7",id:e.elementId},r.a.createElement(ie,{target:c})))),void 0!==c.dives?r.a.createElement(de,{dives:c.dives}):null)}return null},pe=function(e){var t=Object(n.useState)(!1),a=Object(W.a)(t,2),l=a[0],i=a[1],c=e.divingEvent,u=void 0!==c.description&&null!==c.description&&""!==c.description,s=void 0!==c.target&&null!==c.target,o=void 0!==c.dives&&null!==c.dives&&c.dives.length>0;return e.noDetails?r.a.createElement("tr",null,r.a.createElement("td",null,se(e.divingEvent.startdate)),r.a.createElement("td",null,e.divingEvent.title)):r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(){return i(!l)},"aria-controls":c._id,"aria-expanded":l},r.a.createElement("td",null,u||s?r.a.createElement("i",{className:l?"fas fa-caret-down":"fas fa-caret-right"}):null),r.a.createElement("td",null,se(e.divingEvent.startdate)),r.a.createElement("td",null,se(e.divingEvent.enddate)),r.a.createElement("td",null,e.divingEvent.creator.username),r.a.createElement("td",{colSpan:"3"},e.divingEvent.title)),u||s?r.a.createElement(re.a,{in:l},r.a.createElement("tr",{id:c._id},r.a.createElement("td",{colSpan:"7"},r.a.createElement(ne.a,null,r.a.createElement("tbody",null,u?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",debug:"description"},e.divingEvent.description)):null,s?r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{id:"target"},r.a.createElement("td",{width:"2.5%"}),r.a.createElement("td",{width:"40%",colSpan:"2",id:"caption"},"Kohde"),r.a.createElement("td",{width:"57.5%",colSpan:"4",id:"caption"},"Sijainti")),r.a.createElement(me,{target:c.target,elementId:c._id.concat(c.target._id)})):null,o?r.a.createElement(de,{dives:c.dives,elementId:"divesOf".concat(c)}):null))))):null)},ge={setNotification:y},Ee=Object(c.b)(function(e){return{diveStats:e.diveStats,loggedUser:e.authentication.loggedUser}},ge)(function(e){var t=e.diveStats.allTimeTopTargets,a=e.diveStats.pastYearTopTargets,n=e.diveStats.recentDivingEvents,l=e.diveStats.upcomingDivingEvents;return void 0!==e.loggedUser||null!==e.loggedUser?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(z.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(H.a,{variant:"primary"},r.a.createElement("span",{id:"caption"},"Suosituimmat sukelluskohteet"))),r.a.createElement(ae.a,null,r.a.createElement(H.a,{variant:"primary"},r.a.createElement("span",{id:"caption"},"Kuluneen vuoden suosituimmat sukelluskohteet")))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ne.a,{borderless:!0,responsive:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kohde"),r.a.createElement("th",null,"Sukelluksia"))),r.a.createElement("tbody",null,void 0!==t&&null!==t&&t.length>0?t.map(function(e){return r.a.createElement(me,{key:"atpop".concat(e._id),target:e,elementID:e._id,noDetails:!0})}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",null,"N\xe4ytt\xe4isi silt\xe4, ett\xe4 yht\xe4\xe4n sukelluksia ei ole tehty")))))),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{borderless:!0,responsive:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kohde"),r.a.createElement("th",null,"Sukelluksia"))),r.a.createElement("tbody",null,void 0!==a&&null!==a&&a.length>0?a.map(function(e){return r.a.createElement(me,{key:"pypop".concat(e._id),target:e,elementID:e._id,noDetails:!0})}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",null,"N\xe4ytt\xe4isi silt\xe4, ett\xe4 yht\xe4\xe4n sukelluksia ei ole tehty"))))))))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(H.a,{variant:"primary"},r.a.createElement("span",{id:"caption"},"Viimeisimm\xe4t tapahtumat"))),r.a.createElement(ae.a,null,r.a.createElement(H.a,{variant:"primary"},r.a.createElement("span",{id:"caption"},"Tulevat tapahtumat")))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ne.a,{borderless:!0,responsive:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Tapahtuma"))),r.a.createElement("tbody",null,void 0!==n&&null!==n&&n.length>0?n.map(function(e){return r.a.createElement(pe,{key:"recent".concat(e._id),divingEvent:e,noDetails:!0})}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",null,"N\xe4ytt\xe4isi silt\xe4, ett\xe4 yht\xe4\xe4n tapahtumia ei ole j\xe4rjestetty")))))),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{borderless:!0,responsive:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"2"},"Tapahtuma"))),r.a.createElement("tbody",null,void 0!==l&&null!==l&&l.length>0?l.map(function(e){return r.a.createElement(pe,{key:"recent".concat(e._id),divingEvent:e,noDetails:!0})}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",null,"N\xe4ytt\xe4isi silt\xe4, ett\xe4 yht\xe4\xe4n tapahtumia ei olla j\xe4rjest\xe4m\xe4ss\xe4")))))))))))):"/"!==window.location.pathname?r.a.createElement(Y.a,{to:"/"}):null}),he=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Alkaen"),r.a.createElement(q.a.Control,{type:"text",placeholder:"pp.kk.vvvv",name:"startdateFilter",value:e.startFilter,onChange:e.trigger,alt:"Alkaen"}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa alkamisp\xe4iv\xe4n mukaan"))},ve=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"P\xe4\xe4ttyen"),r.a.createElement(q.a.Control,{type:"text",placeholder:"pp.kk.vvvv",name:"enddateFilter",value:e.endFilter,onChange:e.trigger,alt:"P\xe4\xe4ttyen"}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa p\xe4\xe4ttymisp\xe4iv\xe4n mukaan"))},fe=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Perustaja"),r.a.createElement(q.a.Control,{type:"text",placeholder:"Perustajan k\xe4ytt\xe4j\xe4nimi",name:"creatorFilter",value:e.creatorFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa tapahtuman perustajan k\xe4ytt\xe4j\xe4nimen osalla"))},ye=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Nimi"),r.a.createElement(q.a.Control,{type:"text",placeholder:"Tapahtuman nimi",name:"titleFilter",value:e.titleFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa tapahtuman nimen osalla"))},be=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Kuvaus"),r.a.createElement(q.a.Control,{type:"text",placeholder:"Tapahtuman kuvaus",name:"descriptionFilter",value:e.descriptionFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa tapahtuman kuvauksen osalla"))},ke=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Group,{as:ae.a},r.a.createElement(q.a.Label,null,e.title),r.a.createElement(q.a.Control,{type:"number",step:"0.1",min:"-90.0",max:"90.0",placeholder:"Esim 60,0",name:"latitudeFilter",value:e.latitudeFilter,onChange:e.latitudeTrigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa aluetta leveyspiirill\xe4 desimaaleina")),r.a.createElement(q.a.Group,{as:ae.a},r.a.createElement(q.a.Control,{type:"number",step:"0.1",min:"-180.0",max:"180.0",placeholder:"Esim 25,0",name:"longitudeFilter",value:e.longitudeFilter,onChange:e.longitudeTrigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa aluetta pituuspiirill\xe4 desimaaleina")))},Se=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Kohde"),r.a.createElement(q.a.Control,{type:"text",placeholder:"Kohteen nimi",name:"targetFilter",value:e.targetFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa kohteen nimen osalla"))},je=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"K\xe4ytt\xe4j\xe4"),r.a.createElement(q.a.Control,{type:"text",placeholder:"K\xe4ytt\xe4j\xe4nimi",name:"usernameFilter",value:e.usernameFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa k\xe4ytt\xe4j\xe4nimen osalla"))},we=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"S\xe4hk\xf6posti"),r.a.createElement(q.a.Control,{type:"text",placeholder:"joku@jossain.com",name:"emailFilter",value:e.emailFilter,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted"},"Rajaa s\xe4hk\xf6postiosoitteen osalla"))},Oe=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"caption"},"Suodata n\xe4ytett\xe4vi\xe4 tapahtumia"),r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(he,{value:e.startFilter,trigger:e.handleStartFiltering})),r.a.createElement(ae.a,null,r.a.createElement(ve,{value:e.endFilter,trigger:e.handleEndFiltering})),r.a.createElement(ae.a,null,r.a.createElement(fe,{value:e.creatorFilter,trigger:e.handleCreatorFiltering}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ye,{value:e.titleFilter,trigger:e.handleTitleFiltering})),r.a.createElement(ae.a,null,r.a.createElement(be,{value:e.descriptionFilter,trigger:e.handleDescriptionFiltering})),r.a.createElement(ae.a,null,r.a.createElement(Se,{value:e.targetFilter,trigger:e.handleTargetFiltering})))))},Fe=Object(c.b)(function(e){return{events:e.events}},null)(function(e){if(void 0===e.content||null===e.content)return null;var t=function(){var t={},n="";switch(e.contentType){case"events":t=a(100),n="sukellustapahtumat.csv";break;case"targetDives":t=a(101),n="kohteidensukellukset.csv";break;case"targets":t=a(102),n="kohteet.csv";break;case"users":t=a(103),n="kayttajat.csv"}var l=e.sep,i=e.dec,c=","===e.dec?".":",",u=[],s="";t.forEach(function(e){s=s.concat('"').concat(e.label).concat('";')}),s=s.concat("\n"),u.push(s);for(var o=!1,d=0,m=0,p=function(a){var n=e.content[a],r="";t.forEach(function(e){var t="",a="Number"===e.type?"":'"';if("Count"===e.type&&void 0!==n[e.key]&&null!==n[e.key])t=n[e.key].length;else if(e.key.includes("."))try{var u=e.key.split("."),s=n[u[0]],p=s[u[1]];if(void 0!==u[2]){o=!0;var g=Array.from(s);m=g.length-1,t=g[d][u[2]]}else void 0!==p&&null!=p&&(t=p)}catch(E){}else t=void 0===n[e.key]||null===n[e.key]?"":n[e.key];""!==t&&("Number"===e.type?t=t.toString().replace(c,i):"Latitude"===e.type?t="".concat(le(t)).concat(t>0?" N ":" S "):"Longitude"===e.type&&(t="".concat(le(t)).concat(t>0?" E ":" W "))),r=r.concat(a).concat(t).concat(a).concat(l)}),r=r.concat("\n"),u.push(r),d>=m?(o=!1,d=0):d++},g=0;g<e.content.length;o?null:g++)p(g);return{v:r.a.createElement(r.a.Fragment,null,function(){var e=new Blob(u,{type:"text/csv;charset=utf-8"}),t=window.URL.createObjectURL(e);return r.a.createElement("a",{href:t,type:"text/csv;charset=utf-8",download:n},"Lataa CSV")}())}}();return"object"===typeof t?t.v:void 0}),xe=a(121),Te=function(e){var t=parseInt(e.current,10),a=e.pages,n=1,l=a;a>9&&(n=Math.max(1,t-4),l=Math.min(a,n+8),n=Math.max(1,l-8));var i=[];i.push(r.a.createElement(xe.a.Item,{key:-9999999,id:1,onClick:e.handlePageSelect},"\u21e4")),i.push(r.a.createElement(xe.a.Item,{key:-9999998,id:Math.max(1,t-1),onClick:e.handlePageSelect},"\u2190")),n>1&&i.push(r.a.createElement(xe.a.Item,{key:-9999997,id:Math.max(1,t-9),onClick:e.handlePageSelect},"\u2026"));for(var c=n;c<=l;c++)i.push(r.a.createElement(xe.a.Item,{key:c,id:c,active:c===t,onClick:e.handlePageSelect},c));return l<a&&i.push(r.a.createElement(xe.a.Item,{key:9999997,id:Math.min(a,t+9),onClick:e.handlePageSelect},"\u2026")),i.push(r.a.createElement(xe.a.Item,{key:9999998,id:Math.min(a,t+1),onClick:e.handlePageSelect},"\u2192")),i.push(r.a.createElement(xe.a.Item,{key:9999999,id:a,onClick:e.handlePageSelect},"\u21e5")),r.a.createElement(xe.a,null,i)},Ue={setNotification:y},Ce=Object(c.b)(function(e){return{events:e.events,loggedUser:e.authentication.loggedUser}},Ue)(function(e){ue.Settings.defaultLocale="fi";var t=e.events,a=Object(n.useState)(1),l=Object(W.a)(a,2),i=l[0],c=l[1],u=Object(n.useState)(""),s=Object(W.a)(u,2),o=s[0],p=s[1],g=Object(n.useState)(""),E=Object(W.a)(g,2),h=E[0],v=E[1],f=Object(n.useState)(""),y=Object(W.a)(f,2),b=y[0],k=y[1],S=Object(n.useState)(""),j=Object(W.a)(S,2),w=j[0],O=j[1],F=Object(n.useState)(""),x=Object(W.a)(F,2),T=x[0],U=x[1],C=Object(n.useState)(""),_=Object(W.a)(C,2),I=_[0],N=_[1],D=Object(n.useState)(""),L=Object(W.a)(D,2),B=L[0],A=L[1],R=Object(n.useState)(""),K=Object(W.a)(R,2),M=K[0],P=K[1],z=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function V(e){return e instanceof Date&&!isNaN(e)}Object(n.useEffect)(function(){z()},[]);var G=t.filter(function(e){return function(e){return 0===o.length||new Date(e.startdate)>=new Date(h)}(e)&&function(e){return 0===b.length||new Date(e.enddate)<=new Date(w)}(e)&&function(e){return!e.title&&0===T.length||e.title&&e.title.toUpperCase().includes(T.toUpperCase())}(e)&&function(e){return!e.description&&0===I.length||e.description&&e.description.toUpperCase().includes(I.toUpperCase())}(e)&&function(e){return!e.target&&0===B.length||e.target&&e.target.name.toUpperCase().includes(B.toUpperCase())}(e)&&function(e){return!e.creator.username&&0===M.length||void 0===e.creator.username||e.creator&&e.creator.username.toUpperCase().includes(M.toUpperCase())}(e)}),H=Math.ceil(G.length/20);return r.a.createElement("div",null,r.a.createElement("h2",null,"Sukellustapahtumat"),r.a.createElement(Oe,{startFilter:o,handleStartFiltering:function(e){try{var t=ue.DateTime.fromFormat(e.target.value,"d.L.yyyy").toJSDate();V(t)&&v(t),p(e.target.value)}catch(a){console.log("Error with startdate",e.target.value)}},endFilter:b,handleEndFiltering:function(e){try{var t=ue.DateTime.fromFormat(e.target.value,"d.L.yyyy").plus({days:1}).plus({minutes:-1}).toJSDate();V(t)&&O(t),k(e.target.value)}catch(a){console.log("Error with enddate",e.target.value)}},titleFilter:T,handleTitleFiltering:function(e){U(e.target.value)},descriptionFilter:I,handleDescriptionFiltering:function(e){N(e.target.value)},targetFilter:B,handleTargetFiltering:function(e){A(e.target.value)},creatorFilter:M,handleCreatorFiltering:function(e){P(e.target.value)}}),r.a.createElement("div",{id:"caption"},"N\xe4ytet\xe4\xe4n ",G.length,"/",e.events.length," tapahtumaa. \xa0",void 0!==G&&null!==G?r.a.createElement(Fe,{contentType:"events",content:G,sep:";",dec:","}):null),r.a.createElement(ne.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"2.5%"}),r.a.createElement("th",{width:"17.5%"},"Alkuaika"),r.a.createElement("th",{width:"17.5%"},"Loppuaika"),r.a.createElement("th",{width:"15%"},"Perustaja"),r.a.createElement("th",{width:"47.5%",colSpan:"3"},"Tapahtuma"))),r.a.createElement("tbody",null,function(){var e=20*(i-1);return void 0!==G&&null!==G?G.map(function(t,a){return a>=e&&a<e+20?r.a.createElement(pe,{key:t._id,divingEvent:t}):null}):null}())),r.a.createElement(Te,{current:i,pages:H,handlePageSelect:function(e){try{c(parseInt(e.target.id))}catch(t){}}}))}),_e=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"caption"},"Suodata n\xe4ytett\xe4vi\xe4 kohteita"),r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(he,{value:e.startFilter,trigger:e.handleStartFiltering})),r.a.createElement(ae.a,null,r.a.createElement(ve,{value:e.endFilter,trigger:e.handleEndFiltering})),r.a.createElement(ae.a,null,r.a.createElement(Se,{value:e.targetFilter,trigger:e.handleTargetFiltering}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ke,{title:"Alueen luoteisnurkka",latitudeFilter:e.northFilter,latitudeTrigger:e.handleNorthFiltering,longitudeFilter:e.westFilter,longitudeTrigger:e.handleWestFiltering})),r.a.createElement(ae.a,null,r.a.createElement(ke,{title:"Alueen kaakkoisnurkka",latitudeFilter:e.southFilter,latitudeTrigger:e.handleSouthFiltering,longitudeFilter:e.eastFilter,longitudeTrigger:e.handleEastFiltering})))))},Ie={setNotification:y},Ne=Object(c.b)(function(e){return{targets:e.targets,diveStats:e.diveStats,loggedUser:e.authentication.loggedUser}},Ie)(function(e){ue.Settings.defaultLocale="fi";var t=Object(n.useState)(1),a=Object(W.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(""),u=Object(W.a)(c,2),s=u[0],o=u[1],p=Object(n.useState)(""),g=Object(W.a)(p,2),E=g[0],h=g[1],v=Object(n.useState)(""),f=Object(W.a)(v,2),y=f[0],b=f[1],k=Object(n.useState)(""),S=Object(W.a)(k,2),j=S[0],w=S[1],O=Object(n.useState)(""),F=Object(W.a)(O,2),x=F[0],T=F[1],U=Object(n.useState)(70.1),C=Object(W.a)(U,2),_=C[0],I=C[1],N=Object(n.useState)(19),D=Object(W.a)(N,2),L=D[0],B=D[1],A=Object(n.useState)(59.4),R=Object(W.a)(A,2),K=R[0],M=R[1],P=Object(n.useState)(31.6),z=Object(W.a)(P,2),V=z[0],G=z[1],H=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function J(e){return e instanceof Date&&!isNaN(e)}Object(n.useEffect)(function(){H()},[]);var Y=e.diveStats.targetDives.filter(function(e){return function(e){return 0===s.length||void 0!==e.dives&&new Date(e.firstDive)>=new Date(E)}(e)&&function(e){return 0===y.length||void 0!==e.dives&&new Date(e.lastDive)>=new Date(j)}(e)&&function(e){return 0===x.length||e&&e.name.toUpperCase().includes(x.toUpperCase())}(e)&&function(e){return null!==_&&0===_.length||e&&e.latitude<=_}(e)&&function(e){return null!==L&&0===L.length||e&&e.longitude>=L}(e)&&function(e){return null!==K&&0===K.length||e&&e.latitude>=K}(e)&&function(e){return null!==V&&0===V.length||e&&e.longitude<=V}(e)}),q=Math.ceil(Y.length/20);return r.a.createElement("div",null,r.a.createElement("h2",null,"Kohteiden sukellukset"),r.a.createElement(_e,{startFilter:s,handleStartFiltering:function(e){try{var t=ue.DateTime.fromFormat(e.target.value,"d.M.yyyy","fi-FI").toJSDate();J(t)&&h(t),o(e.target.value),i(1)}catch(a){console.log("Error with startdate",e.target.value)}},endFilter:y,handleEndFiltering:function(e){try{var t=ue.DateTime.fromFormat(e.target.value,"d.M.yyyy","fi-FI").plus({days:1}).plus({minutes:-1}).toJSDate();J(t)&&w(t),b(e.target.value),i(1)}catch(a){console.log("Error with enddate",e.target.value)}},targetFilter:x,handleTargetFiltering:function(e){T(e.target.value),i(1)},northFilter:_,handleNorthFiltering:function(e){try{I(Number(e.target.value)),i(1)}catch(t){I(null)}},westFilter:L,handleWestFiltering:function(e){try{B(Number(e.target.value)),i(1)}catch(t){B(null)}},southFilter:K,handleSouthFiltering:function(e){try{M(Number(e.target.value)),i(1)}catch(t){M(null)}},eastFilter:V,handleEastFiltering:function(e){try{G(Number(e.target.value)),i(1)}catch(t){G(null)}}}),r.a.createElement("div",{id:"caption"},"N\xe4ytet\xe4\xe4n ",Y.length,"/",e.diveStats.targetDives.length," kohteesta, joissa sukelluksia. \xa0",void 0!==Y&&null!==Y?r.a.createElement(Fe,{contentType:"targetDives",content:Y,sep:";",dec:","}):null),r.a.createElement(ne.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",{id:"target"},r.a.createElement("th",{width:"2.5%"}),r.a.createElement("th",{width:"40%",colSpan:"2",id:"caption"},"Kohde"),r.a.createElement("th",{width:"57.5%",colSpan:"4",id:"caption"},"Sijainti"))),r.a.createElement("tbody",null,function(){var e=20*(l-1);return Y.map(function(t,a){return a>=e&&a<e+20?r.a.createElement(me,{key:t._id,target:t,elementId:"divesOf".concat(t._id),dives:t.dives}):null})}())),r.a.createElement(Te,{current:l,pages:q,handlePageSelect:function(e){try{i(parseInt(e.target.id))}catch(t){}}}))}),De=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"caption"},"Suodata n\xe4ytett\xe4vi\xe4 kohteita"),r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Se,{value:e.targetFilter,trigger:e.handleTargetFiltering})),r.a.createElement(ae.a,null,r.a.createElement(ke,{title:"Alueen luoteisnurkka",latitudeFilter:e.northFilter,latitudeTrigger:e.handleNorthFiltering,longitudeFilter:e.westFilter,longitudeTrigger:e.handleWestFiltering})),r.a.createElement(ae.a,null,r.a.createElement(ke,{title:"Alueen kaakkoisnurkka",latitudeFilter:e.southFilter,latitudeTrigger:e.handleSouthFiltering,longitudeFilter:e.eastFilter,longitudeTrigger:e.handleEastFiltering})))))},Le={setNotification:y},Be=Object(c.b)(function(e){return{targets:e.targets,loggedUser:e.authentication.loggedUser}},Le)(function(e){var t=Object(n.useState)(1),a=Object(W.a)(t,2),l=a[0],i=a[1],c=Object(n.useState)(""),u=Object(W.a)(c,2),s=u[0],o=u[1],p=Object(n.useState)(70.1),g=Object(W.a)(p,2),E=g[0],h=g[1],v=Object(n.useState)(19),f=Object(W.a)(v,2),y=f[0],b=f[1],k=Object(n.useState)(59.4),S=Object(W.a)(k,2),j=S[0],w=S[1],O=Object(n.useState)(31.6),F=Object(W.a)(O,2),x=F[0],T=F[1],U=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){U()},[]);var C=e.targets.filter(function(e){return function(e){return 0===s.length||e&&e.name.toUpperCase().includes(s.toUpperCase())}(e)&&function(e){return null!==E&&0===E.length||e&&e.latitude<=E}(e)&&function(e){return null!==y&&0===y.length||e&&e.longitude>=y}(e)&&function(e){return null!==j&&0===j.length||e&&e.latitude>=j}(e)&&function(e){return null!==x&&0===x.length||e&&e.longitude<=x}(e)}),_=Math.ceil(C.length/20);return r.a.createElement("div",null,r.a.createElement("h2",null,"Kaikki kohteet"),r.a.createElement(De,{targetFilter:s,handleTargetFiltering:function(e){o(e.target.value),i(1)},northFilter:E,handleNorthFiltering:function(e){try{h(Number(e.target.value)),i(1)}catch(t){h(null)}},westFilter:y,handleWestFiltering:function(e){try{b(Number(e.target.value)),i(1)}catch(t){b(null)}},southFilter:j,handleSouthFiltering:function(e){try{w(Number(e.target.value)),i(1)}catch(t){w(null)}},eastFilter:x,handleEastFiltering:function(e){try{T(Number(e.target.value)),i(1)}catch(t){T(null)}}}),r.a.createElement("div",{id:"caption"},"N\xe4ytet\xe4\xe4n ",C.length,"/",e.targets.length," kohdetta. \xa0",void 0!==C&&null!==C?r.a.createElement(Fe,{contentType:"targets",content:C,sep:";",dec:","}):null),r.a.createElement(ne.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",{id:"target"},r.a.createElement("th",{width:"2.5%"}),r.a.createElement("th",{width:"40%",colSpan:"2",id:"caption"},"Kohde"),r.a.createElement("th",{width:"57.5%",colSpan:"4",id:"caption"},"Sijainti"))),r.a.createElement("tbody",null,function(){var e=20*(l-1);return C.map(function(t,a){return a>=e&&a<e+20?r.a.createElement(me,{key:t._id,target:t,elementID:t._id}):null})}())),r.a.createElement(Te,{current:l,pages:_,handlePageSelect:function(e){try{i(parseInt(e.target.id))}catch(t){}}}))}),Ae=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"K\xe4ytt\xe4j\xe4tunnus"),r.a.createElement(q.a.Control,{type:"text",required:!0,placeholder:"K\xe4ytt\xe4j\xe4tunnus",name:"usernameField",id:e.setusername,defaultValue:e.usernameField,onChange:e.trigger,disabled:e.disabled}),r.a.createElement(q.a.Text,{className:"text-muted",id:e.usernamehint}))},Re=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Salasana"),r.a.createElement(q.a.Control,{type:"password",placeholder:"Salasana",name:"passwordField",id:e.setpassword,defaultValue:e.passwordField,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted",id:e.passwordhint}))},Ke=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"Varmista salasana"),r.a.createElement(q.a.Control,{type:"password",placeholder:"Salasana uudestaan",name:"verifyField",id:e.setverify,defaultValue:e.verifyField,onChange:e.trigger}),r.a.createElement(q.a.Text,{className:"text-muted",id:e.verifyhint}))},Me=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a.Label,null,"P\xe4\xe4k\xe4ytt\xe4j\xe4"),r.a.createElement(q.a.Control,{as:"select",name:"adminField",defaultValue:!!e.adminField,onChange:e.trigger,id:e.setadmin},r.a.createElement("option",{value:"false"},"Ei"),r.a.createElement("option",{value:"true"},"Kyll\xe4")),r.a.createElement(q.a.Text,{className:"text-muted",id:e.adminhint}))},Pe=function(e){var t=e.user,a=Object(n.useState)(!1),l=Object(W.a)(a,2),i=(l[0],l[1],Object(n.useState)(t.username)),c=Object(W.a)(i,2),u=(c[0],c[1],Object(n.useState)(t.email)),s=Object(W.a)(u,2),o=(s[0],s[1],void 0!==t.events&&null!==t.events&&t.events.length>0),d=void 0!==t.dives&&null!==t.dives&&t.dives.length>0,m=void 0!==t.messages&&null!==t.messages&&t.messages.length>0;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.email),r.a.createElement("td",null,o?t.events.length:0),r.a.createElement("td",null,d?t.dives.length:0),r.a.createElement("td",{colSpan:"2"},m?t.messages.length:0))},ze=function(e){return r.a.createElement("div",null,r.a.createElement("div",{id:"caption"},"Suodata n\xe4ytett\xe4vi\xe4 k\xe4ytt\xe4ji\xe4"),r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(je,{value:e.usernameFilter,trigger:e.handleUsernameFiltering})),r.a.createElement(ae.a,null,r.a.createElement(we,{value:e.emailFilter,trigger:e.handleEmailFiltering})))))},Ve={setNotification:y},Ge=Object(c.b)(function(e){return{users:e.users,loggedUser:e.authentication.loggedUser}},Ve)(function(e){var t=e.users,a=Object(n.useState)(1),l=Object(W.a)(a,2),i=l[0],c=l[1],u=Object(n.useState)(""),s=Object(W.a)(u,2),o=s[0],p=s[1],g=Object(n.useState)(""),E=Object(W.a)(g,2),h=E[0],v=E[1],f=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){f()},[]);var y=t.filter(function(e){return function(e){return!e.username&&0===o.length||e.username&&e.username.toUpperCase().includes(o.toUpperCase())}(e)&&function(e){return!e.email&&0===h.length||e.email&&e.email.toUpperCase().includes(h.toUpperCase())}(e)}),b=Math.ceil(y.length/20);return r.a.createElement("div",null,r.a.createElement("h2",null,"Sukeltajat"),r.a.createElement(ze,{usernameFilter:o,handleUsernameFiltering:function(e){p(e.target.value)},emailFilter:h,handleEmailFiltering:function(e){v(e.target.value)}}),r.a.createElement("div",{id:"caption"},"N\xe4ytet\xe4\xe4n ",y.length,"/",e.users.length," k\xe4ytt\xe4j\xe4\xe4. \xa0",void 0!==y&&null!==y?r.a.createElement(Fe,{contentType:"users",content:y,sep:";",dec:","}):null),r.a.createElement(ne.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"2.5%"}),r.a.createElement("th",{width:"30%"},"K\xe4ytt\xe4j\xe4"),r.a.createElement("th",{width:"30%"},"S\xe4hk\xf6posti"),r.a.createElement("th",{width:"12.5%"},"Tapahtumia"),r.a.createElement("th",{width:"12.5%"},"Sukelluksia"),r.a.createElement("th",{width:"12.5%",colSpan:"2"},"Viestej\xe4"))),r.a.createElement("tbody",null,function(){var e=20*(i-1);return y.map(function(t,a){return a>=e&&a<e+20?r.a.createElement(Pe,{key:t._id,user:t}):null})}())),r.a.createElement(Te,{current:i,pages:b,handlePageSelect:function(e){try{c(parseInt(e.target.id))}catch(t){}}}))}),He=function(e){return r.a.createElement("div",null,r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Ae,{usernameField:e.usernameField,trigger:e.handleUsernameField,usernamehint:"usernamehint".concat(e.bouserid),disabled:!0})),r.a.createElement(ae.a,null,r.a.createElement(Me,{adminField:e.adminField,trigger:e.handleAdminField,adminhint:"adminhint".concat(e.bouserid),setadmin:"setadmin".concat(e.bouserid)}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Re,{passwordField:e.passwordField,trigger:e.handlePasswordField,passwordhint:"passwordhint".concat(e.bouserid),setpassword:"setpassword".concat(e.bouserid)})),r.a.createElement(ae.a,null,r.a.createElement(Ke,{verifyField:e.verifyField,trigger:e.handleVerifyField,verifyhint:"verifyhint".concat(e.bouserid),setverify:"setverify".concat(e.bouserid)}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Q.a,{variant:"success",type:"button",value:e.bouserid,onClick:e.handleBOUserUpdate},"P\xe4ivit\xe4"),"\xa0",r.a.createElement(Q.a,{variant:"primary",type:"button",value:e.bouserid,onClick:e.handleBOUserCancel},"Peru"),"\xa0",r.a.createElement(Q.a,{variant:"danger",type:"button",value:e.bouserid,id:"delete".concat(e.bouserid),onClick:e.handleBOUserDelete},"Poista"),"\xa0",r.a.createElement(q.a.Text,{className:"text-muted",id:"delhint".concat(e.bouserid)})),r.a.createElement(ae.a,null),r.a.createElement(ae.a,null))))},Je=function(e){return r.a.createElement("div",null,r.a.createElement(q.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Ae,{usernameField:e.usernameField,trigger:e.handleUsernameField,usernamehint:"usernamehint".concat(e.bouserid),disabled:!1,setusername:"setusername".concat(e.bouserid)})),r.a.createElement(ae.a,null,r.a.createElement(Me,{adminField:e.adminField,trigger:e.handleAdminField,adminhint:"adminhint".concat(e.bouserid),setadmin:"setadmin".concat(e.bouserid)}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Re,{passwordField:e.passwordField,trigger:e.handlePasswordField,passwordhint:"passwordhint".concat(e.bouserid),setpassword:"setpassword".concat(e.bouserid)})),r.a.createElement(ae.a,null,r.a.createElement(Ke,{verifyField:e.verifyField,trigger:e.handleVerifyField,verifyhint:"verifyhint".concat(e.bouserid),setverify:"setverify".concat(e.bouserid)}))),r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(Q.a,{variant:"success",type:"button",value:e.bouserid,onClick:e.handleBOUserCreate},"Lis\xe4\xe4"),"\xa0",r.a.createElement(Q.a,{variant:"primary",type:"button",value:e.bouserid,onClick:e.handleNewBOUserCancel},"Peru")),r.a.createElement(ae.a,null),r.a.createElement(ae.a,null))))},We={createBOUser:function(e,t,a){return function(){var n=Object(m.a)(d.a.mark(function n(r){var l;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,D.create(e,t,a);case 3:l=n.sent,r({type:"CREATE_BOUSER",data:l.data}),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("Something went wrong when adding a bo user",n.t0),r({type:"CREATE_FAILED"});case 11:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e){return n.apply(this,arguments)}}()},updateBOUser:function(e){return function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.update(e);case 2:204===t.sent.status?a({type:"UPDATE_BOUSER",data:e}):(console.log("Something went wrong when updating a bo user"),a({type:"UPDATE_FAILED"}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},deleteBOUser:function(e){return e.admin?function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"DELETE_FAILED"});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}():function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.remove(e);case 2:204===t.sent.status?a({type:"DELETE_BOUSER",data:e}):(console.log("Something went wrong when deleting a bo user"),a({type:"DELETE_FAILED"}));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},initializeBOUsers:L},Ye=Object(c.b)(function(e){return{bousers:e.bousers,loggedUser:e.authentication.loggedUser}},We)(function(e){var t=e.bouser,a=e.bouser._id===e.loggedUser.id,l="newBOUser"===t._id,i=Object(n.useState)(!1),c=Object(W.a)(i,2),u=c[0],s=c[1],o=Object(n.useState)(t.username||""),p=Object(W.a)(o,2),g=p[0],E=p[1],h=Object(n.useState)(""),v=Object(W.a)(h,2),f=v[0],y=v[1],b=Object(n.useState)(""),k=Object(W.a)(b,2),S=k[0],j=k[1],w=Object(n.useState)(t.admin),O=Object(W.a)(w,2),F=O[0],x=O[1],T=Object(n.useState)(t.admin),U=Object(W.a)(T,2),C=U[0],_=U[1],I=function(){return e.bousers.some(function(e){return e.username===g.trim()})};Object(n.useEffect)(function(){document.getElementById("usernamehint".concat(t._id))&&(l?""===g.trim()?document.getElementById("usernamehint".concat(t._id)).innerHTML="Sy\xf6t\xe4 k\xe4ytt\xe4j\xe4tunnus":document.getElementById("usernamehint".concat(t._id)).innerHTML=I()?"T\xe4m\xe4 k\xe4ytt\xe4j\xe4tunnus on jo k\xe4yt\xf6ss\xe4":"T\xe4m\xe4 k\xe4ytt\xe4j\xe4tunnus on vapaana":document.getElementById("usernamehint".concat(t._id)).innerHTML="K\xe4ytt\xe4j\xe4tunnusta ei voi vaihtaa"),document.getElementById("passwordhint".concat(t._id))&&document.getElementById("verifyhint".concat(t._id))&&(""===f&&""===S?l?(document.getElementById("passwordhint".concat(t._id)).innerHTML="Sy\xf6t\xe4 salasana",document.getElementById("verifyhint".concat(t._id)).innerHTML="Sy\xf6t\xe4 salasana uudestaan"):(document.getElementById("passwordhint".concat(t._id)).innerHTML="Sy\xf6t\xe4 uusi salasana, jos haluat vaihtaa salasanan",document.getElementById("verifyhint".concat(t._id)).innerHTML="Sy\xf6t\xe4 salasana uudestaan, jos haluat vaihtaa salasanan"):f!==S?(document.getElementById("passwordhint".concat(t._id)).innerHTML="Salasanat eiv\xe4t t\xe4sm\xe4\xe4",document.getElementById("verifyhint".concat(t._id)).innerHTML="Salasanat eiv\xe4t t\xe4sm\xe4\xe4"):(document.getElementById("passwordhint".concat(t._id)).innerHTML="Salasanat t\xe4sm\xe4\xe4v\xe4t",document.getElementById("verifyhint".concat(t._id)).innerHTML="Salasanat t\xe4sm\xe4\xe4v\xe4t")),document.getElementById("isAdmin".concat(t._id))&&(document.getElementById("isAdmin".concat(t._id)).innerHTML=C?"P\xe4\xe4k\xe4ytt\xe4j\xe4":"Ei p\xe4\xe4k\xe4ytt\xe4j\xe4"),document.getElementById("setadmin".concat(e.bouser._id))&&(document.getElementById("setadmin".concat(e.bouser._id)).disabled=a),document.getElementById("adminhint".concat(t._id))&&(document.getElementById("adminhint".concat(t._id)).innerHTML=a?"Et voi poistaa itselt\xe4si p\xe4\xe4k\xe4ytt\xe4jyytt\xe4":"Valitse onko k\xe4ytt\xe4j\xe4 p\xe4\xe4k\xe4ytt\xe4j\xe4"),document.getElementById("delete".concat(e.bouser._id))&&(document.getElementById("delete".concat(e.bouser._id)).disabled=C),document.getElementById("delhint".concat(e.bouser._id))&&(document.getElementById("delhint".concat(e.bouser._id)).innerHTML=C?"Et voi poistaa p\xe4\xe4k\xe4ytt\xe4j\xe4\xe4":"")});var N=function(e){y(e.target.value)},D=function(e){j(e.target.value)},L=function(e){x(e.target.value)},B=function(){E(""),document.getElementById("setusername".concat(t._id)).value="",y(""),document.getElementById("setpassword".concat(t._id)).value="",j(""),document.getElementById("setverify".concat(t._id)).value="",x(!1)},A=function(){y(""),document.getElementById("setpassword".concat(t._id)).value="",j(""),document.getElementById("setverify".concat(t._id)).value="",x(t.admin),document.getElementById("setadmin".concat(t._id)).value=t.admin},R=function(){s(!u),u||(l?B():A())},K=function(){var a=Object(m.a)(d.a.mark(function a(n){return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),f!==S){a.next=14;break}return a.prev=2,t.username=g,t.password=f,t.admin="true"===F,a.next=8,e.updateBOUser(t);case 8:_("true"===F),s(!1),a.next=14;break;case 12:a.prev=12,a.t0=a.catch(2);case 14:case"end":return a.stop()}},a,null,[[2,12]])}));return function(e){return a.apply(this,arguments)}}();return l?r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(){return R()},"aria-controls":t._id,"aria-expanded":u},r.a.createElement("td",null,r.a.createElement("i",{className:"fas fa-user-plus"})),r.a.createElement("td",null,"Lis\xe4\xe4 uusi Back Office k\xe4ytt\xe4j\xe4"),r.a.createElement("td",null,"\xa0")),r.a.createElement(re.a,{in:u},r.a.createElement("tr",{id:t._id},r.a.createElement("td",{colSpan:"7"},r.a.createElement(Je,{bouserid:t._id,usernameField:g,handleUsernameField:function(e){E(e.target.value)},passwordField:f,handlePasswordField:N,verifyField:S,handleVerifyField:D,adminField:F,handleAdminField:L,handleNewBOUserCancel:function(e){e.preventDefault(),B(),s(!1)},handleBOUserCreate:function(t){if(t.preventDefault(),f===S)if(I()||""===g.trim())console.log("Username is taken or empty");else try{e.createBOUser(g.trim(),f,F),B()}catch(a){}}}))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{onClick:function(){return R()},"aria-controls":t._id,"aria-expanded":u},r.a.createElement("td",null,r.a.createElement("i",{className:u?"fas fa-user-edit":"fas fa-user"})),r.a.createElement("td",null,t.username),r.a.createElement("td",null,r.a.createElement("span",{id:"isAdmin".concat(t._id)}))),r.a.createElement(re.a,{in:u},r.a.createElement("tr",{id:t._id},r.a.createElement("td",{colSpan:"7"},r.a.createElement(He,{bouserid:t._id,usernameField:g,passwordField:f,handlePasswordField:N,verifyField:S,handleVerifyField:D,adminField:F,handleAdminField:L,handleBOUserCancel:function(e){e.preventDefault(),A(),s(!1)},handleBOUserUpdate:K,handleBOUserDelete:function(a){a.preventDefault();try{window.confirm("Haluatko varmasti poistaa k\xe4ytt\xe4j\xe4n ".concat(g,"?"))&&(e.deleteBOUser(t),s(!1))}catch(n){}}})))))}),qe={setNotification:y},Qe=Object(c.b)(function(e){return{bousers:e.bousers,loggedUser:e.authentication.loggedUser}},qe)(function(e){var t=e.bousers,a=void 0===e.bousers||null===e.bousers?0:e.bousers.length,l=function(){var e=Object(m.a)(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){l()},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Back Office k\xe4ytt\xe4j\xe4t"),r.a.createElement("div",{id:"caption"},"N\xe4ytet\xe4\xe4n ",a,"/",a," Back Office k\xe4ytt\xe4j\xe4\xe4."),r.a.createElement(ne.a,{bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"2.5%"}),r.a.createElement("th",{width:"47.5%"},"K\xe4ytt\xe4j\xe4"),r.a.createElement("th",{width:"50%"},"P\xe4\xe4k\xe4ytt\xe4j\xe4"))),r.a.createElement("tbody",null,r.a.createElement(Ye,{key:"newBOUser",bouser:{_id:"newBOUser",admin:!1}}),void 0!==t&&null!==t?t.map(function(e){return r.a.createElement(Ye,{key:e._id,bouser:e})}):null)))}),Xe={initializeTargets:function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:a=(a=e.sent).sort(function(e,t){return"".concat(e.name,":").concat(e.mj_id).toUpperCase().localeCompare("".concat(t.name,":").concat(t.mj_id).toUpperCase())}),t({type:"INIT_TARGETS",data:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},initializeEvents:function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAll();case 2:a=(a=e.sent).sort(function(e,t){return new Date(t.startdate)-new Date(e.startdate)}),t({type:"INIT_EVENTS",data:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},mapDivesToTargets:function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){var a,n,r,l,i,c,u,s,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n={},e.next=4,O.getAll();case 4:if(void 0===(r=e.sent)||null===r||0===r.length){e.next=10;break}return l=new Map,e.next=9,r.forEach(function(e){if(void 0!==e.target&&null!==e.target&&void 0!==e.dives&&null!==e.dives&&e.dives.length>0){var t={},a={};l.has("".concat(e.target.name).concat(e.target.mj_id))?(t=(a=l.get("".concat(e.target.name).concat(e.target.mj_id))).dives).concat(e.dives):(a=e.target,t=Array.from(e.dives)),(t=t.sort(function(e,t){return new Date(t.startdate)-new Date(e.startdate)})).forEach(function(e){e.username=e.user.username}),a.dives=t,l.set("".concat(e.target.name).concat(e.target.mj_id),a)}});case 9:n=Array.from(l.values()).sort(function(e,t){return"".concat(e.name,":").concat(e.mj_id).toUpperCase().localeCompare("".concat(t.name,":").concat(t.mj_id).toUpperCase())});case 10:return a.targetDives=n,i=n,e.next=14,i.filter(function(e){return void 0!==e.dives&&null!==e.dives&&e.dives.length>0});case 14:return i=e.sent,e.next=17,i.sort(function(e,t){return t.dives.length-e.dives.length});case 17:return i=(i=e.sent).slice(0,5),a.allTimeTopTargets=i,(c=new Date).setFullYear(c.getFullYear()-1),u=n,e.next=25,u.filter(function(e){return e.dives=e.dives.filter(function(e){return new Date(e.startdate)>c}),void 0!==e.dives&&null!==e.dives&&e.dives.length>0});case 25:return u=e.sent,e.next=28,u.sort(function(e,t){return t.dives.length-e.dives.length});case 28:u=(u=e.sent).slice(0,5),a.pastYearTopTargets=u,s=(s=(s=r.filter(function(e){return new Date(e.startdate)<new Date})).sort(function(e,t){return new Date(t.startdate)-new Date(e.startdate)})).slice(0,5),a.recentDivingEvents=s,o=(o=(o=r.filter(function(e){return new Date(e.startdate)>=new Date})).sort(function(e,t){return new Date(e.startdate)-new Date(t.startdate)})).slice(0,5),a.upcomingDivingEvents=o,t({type:"MAP_DIVES_TO_TARGETS",data:a});case 40:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},initializeUsers:function(){return function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getAll();case 2:a=(a=e.sent).sort(function(e,t){return e.username.toUpperCase().localeCompare(t.username.toUpperCase())}),t({type:"INIT_USERS",data:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},initializeBOUsers:L,setNotification:y},Ze=Object(c.b)(function(e){return{targets:e.targets,events:e.events,diveStats:e.diveStats,users:e.users,bousers:e.bousers,loggedUser:e.authentication.loggedUser}},Xe)(function(e){var t=function(){var t=Object(m.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setNotification("success","Tervetuloa! Muista hengitt\xe4\xe4 rauhallisesti!",5),void 0!==e.events&&null!==e.events&&0!==e.events.length){t.next=6;break}return t.next=4,e.initializeEvents();case 4:return t.next=6,e.mapDivesToTargets();case 6:if(void 0!==e.targets&&null!==e.targets&&0!==e.targets.length){t.next=9;break}return t.next=9,e.initializeTargets();case 9:if(void 0!==e.users&&null!==e.users&&0!==e.users.length){t.next=12;break}return t.next=12,e.initializeUsers();case 12:if(void 0!==e.bousers&&null!==e.bousers&&0!==e.bousers.length){t.next=15;break}return t.next=15,e.initializeBOUsers();case 15:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)(function(){var e=function(){var e=window.localStorage.getItem("sukeltajaBOUser");return e&&e.length>0&&"null"!==e?JSON.parse(e):null}();void 0!==e&&null!==e&&t()},[]);var a={};return void 0===e.loggedUser||null===e.loggedUser?r.a.createElement(z.a,null,r.a.createElement("div",{className:"justify-content-sm-center"},"\xa0"),r.a.createElement("div",{className:"justify-content-sm-center"},r.a.createElement(J,null)),r.a.createElement("div",{className:"justify-content-sm-center"},r.a.createElement(Z,null))):r.a.createElement(z.a,{style:{paddingTop:"70px"}},r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(V.a,{fixed:"top",collapseOnSelect:!0,expand:"md",bg:"warning",variant:"dark"},r.a.createElement(V.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(V.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(G.a,null,r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/"},"Alkuun")),r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/targets"},"Kohteet")),r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/targetDives"},"Kohteiden sukellukset")),r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/events"},"Sukellustapahtumat")),r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/users"},"Sukeltajat")),r.a.createElement(G.a.Link,{as:"span"},r.a.createElement(M.a,{style:a,to:"/bousers"},"Backofficerit")),r.a.createElement(V.a.Text,{as:"span"},r.a.createElement(ee,null)))))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement(P.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(P.a,{exact:!0,path:"/targets",render:function(){return r.a.createElement(Be,null)}}),r.a.createElement(P.a,{exact:!0,path:"/targetDives",render:function(){return r.a.createElement(Ne,null)}}),r.a.createElement(P.a,{exact:!0,path:"/events",render:function(){return r.a.createElement(Ce,null)}}),r.a.createElement(P.a,{exact:!0,path:"/users",render:function(){return r.a.createElement(Ge,null)}}),r.a.createElement(P.a,{exact:!0,path:"/bousers",render:function(){return r.a.createElement(Qe,null)}}))))))});a(106);i.a.render(r.a.createElement(c.a,{store:R},r.a.createElement(Ze,null)),document.getElementById("root"))},60:function(e,t,a){e.exports=a(107)}},[[60,1,2]]]);
//# sourceMappingURL=main.fb12674e.chunk.js.map